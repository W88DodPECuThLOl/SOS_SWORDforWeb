                                ;*** AILZ80ASM *** Z-80 Assembler, version 1.0.1.0, LST:Full:4
                                ;
                                ; X1 MODE GRAPHICS TEST
                                ;
                                ; ・同時アクセスモードをテスト
                                ; 　・白色の四角を同時アクセスモードを使って描画
                                ; ・青色の四角を通常モードで描画
                                ;
                                
000000 8000                         org $8000
                                
       1FE2                     MPRINT  EQU $1FE2
       1FBE                     PRTHL   EQU $1FBE
       1FEE                     LTNL    EQU $1FEE
                                
                                ; (Y AND 7) * 2^11 + (Y/8)*80
                                ; 800
                                
                                
000000 8000 CDE21F          17      CALL MPRINT
000003 8003 5831204D4F444520        DB "X1 MODE GRAPHICS TEST"
            4752415048494353    
            2054455354          
000018 8018 0D00                    DB 13, 0
                                
                                    ; 同時アクセスモードへ
00001A 801A 01031A          10      LD BC,$1A03
00001D 801D 3E8B             7      LD A, $8B
00001F 801F F3               4      DI
000020 8020 ED79            12      OUT (C),A
000022 8022 3D               4      DEC A
000023 8023 ED79            12      OUT (C),A
                                
                                    ; B,R,Gへ書き込み
                                    ; 白 四角
000025 8025 012000          10      LD BC,$0020
000028 8028 3EFF             7      LD A,$FF
00002A 802A ED79            12      OUT (C),A
00002C 802C 012008          10      LD BC,$0820
00002F 802F ED79            12      OUT (C),A
000031 8031 012010          10      LD BC,$1020
000034 8034 ED79            12      OUT (C),A
000036 8036 012018          10      LD BC,$1820
000039 8039 ED79            12      OUT (C),A
                                
                                    ; 同時アクセスモード解除
00003B 803B ED78            12      IN A,(C)
00003D 803D FB               4      EI
                                
                                    ; 通常モードで 青 四角
00003E 803E 012140          10      LD BC,$4021
000041 8041 3EFF             7      LD A,$FF
000043 8043 ED79            12      OUT (C),A
000045 8045 012148          10      LD BC,$4821
000048 8048 ED79            12      OUT (C),A
00004A 804A 012150          10      LD BC,$5021
00004D 804D ED79            12      OUT (C),A
00004F 804F 012158          10      LD BC,$5821
000052 8052 ED79            12      OUT (C),A
                                
000054 8054 B7               4      OR A
000055 8055 C9              10      RET
[EOF:testGRAM.z80:UTF_8]
